/* http://lorem.in  @author LoeiFy@gmail.com */ 
function R(a,b){return Math.floor(Math.random()*(b-a)+a)}covers=covers.split(","),covers=Object.keys(covers).map(function(a){return covers[a]}),Array.prototype.shuffle=function(){for(var a,b,c=this.length;c--;)a=Math.floor(Math.random()*c),b=this[c],this[c]=this[a],this[a]=b;return this},covers=covers.shuffle(),$(function(a){var b,c,d,e,f,g,h,i=a("#container"),j=a("#popup"),k=a("#close"),l=a("#mark"),m=!1;(b=function(){var b=i.width();d=Math.ceil(b/90);var k=Math.floor(b/d),l=b-k*d,m="";c=4,e=covers.slice(0,c*d),f=covers.slice(c*d);for(var n=0;n<e.length;n++)m+='<li><img alt="'+e[n]+'"/></li>';a("#container").html(m);for(var o=0;c>o;o++)for(var p=0;d>p;p++){var q=d*o+p,r=i.find("li").eq(q);r.css({width:l>p?k+1:k,height:k})}i.height(k*c).data("w",b).data("h",k*c),i.find("li").each(function(){var b=a(this).find("img");b.attr("src","thumbnails/"+b.attr("alt")+".jpg").on("load",function(){a(this).addClass("loaded")})}),setTimeout(function(){for(var b=[],c=0;c<e.length;c++)b.push(c);!function d(){if(!b.length)return j.data("show")||j.addClass("show").data("show",1),void setTimeout(function(){!function b(){var c=R(0,f.length),d="thumbnails/"+f[c]+".jpg",g=R(0,e.length),j=i.find("li").eq(g),k=j.find("img").attr("alt");a('<img src="'+d+'" />').on("load",function(){j.prepend('<img src="'+d+'" alt="'+f[c]+'" />'),a(j.find("img")[0]).css("opacity",1),a(j.find("img")[1]).css("opacity",0),setTimeout(function(){a(j.find("img")[1]).remove()},1e3),f.splice(c,1),f.push(k),h=setTimeout(function(){b()},R(1001,3e3))})}()},1e3);var c=R(0,b.length),k=i.find("li").eq(b[c]).find("img");k.hasClass("loaded")&&(k.css("opacity",1),b.splice(c,1)),g=setTimeout(function(){d()},100)}()},1e3)})(),i.on("click",function(b){var c=a(b.target);if(0!=c.css("opacity")&&m){window.scrollTo(0,0),l.addClass("show");var d="covers/"+c.attr("alt")+".jpg";a('<img src="'+d+'" />').on("load",function(){l.removeClass("loading").html(a(this))})}}),k.on("click",function(){j.removeClass("show"),m=!0}),l.on("click",function(a){l.removeClass("show").addClass("loading").html("")})});